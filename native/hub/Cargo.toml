[package]
# Do not change the name of this crate.
name = "hub"
version = "0.1.0"
edition = "2021"

[lib]
# `lib` is required for non-library targets,
# such as tests and benchmarks.
# `cdylib` is for Linux, Android, Windows, and web.
# `staticlib` is for iOS and macOS.
crate-type = ["lib", "cdylib", "staticlib"]

[dependencies]
rinf = { version = "7.1.0", features = ["show-backtrace"] }
prost = "0.13.0"
anyhow = { version = "1.0.95", features = ["backtrace"] }
arc-swap = "1.7.1"
async-stream = "0.3.6"
bon = "3.3.2"
csv-async = { version = "1.3.0", features = ["tokio"] }
derive_more = { version = "1.0.0", features = ["debug"] }
forensic-adb = { path = "/home/skrimix/development/forensic-adb" }
futures = "0.3.31"
glob = "0.3.1"
isahc = { version = "1.7.2", features = ["json"] }
lazy-regex = "3.4.1"
log = { version = "0.4.22", features = [
    "max_level_trace",
    "release_max_level_debug",
] } # needed for tracing-log
mimalloc = "0.1.43"
opendal = { version = "0.51.0", features = ["services-webdav"] }
sentry = { version = "0.35.0", features = ["backtrace"] }
sentry-tracing = "0.35.0"
serde = { version = "1.0.217", features = ["derive"] }
serde_json = { version = "1.0.135", features = ["preserve_order"] }
sysproxy = "0.3.0"
test-log = { version = "0.2.16", features = ["trace"] }
tokio = { version = "1.42.0", features = ["macros", "fs", "tracing", "sync", "rt-multi-thread"] }
tokio-stream = { version = "0.1.17", features = ["fs"] }
tokio-util = { version = "0.7.13", features = ["compat"] }
tracing = { version = "0.1.41", features = [
    "max_level_trace",
    "release_max_level_debug",
] }
tracing-subscriber = { version = "0.3.19", features = [
    "time",
    "env-filter",
    "tracing-log",
] }
ubyte = { version = "0.10.4", features = ["serde"] }
chrono = "0.4.39"

[profile.release]
# TODO: enable optimizations
#lto = true 
debug = true
strip = "debuginfo"
split-debuginfo = "packed"

[profile.dev]
split-debuginfo = "packed"